<div class="min-h-screen flex flex-col items-center justify-center bg-[#a00000] px-4">
  <div class="w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-[#a00000]">
    <a routerLink="/gerenciamento">
      <button class="bg-[#A40000] text-white font-bold py-2 px-4 rounded shadow transition duration-300 ease-in-out hover:bg-[#b30000] hover:scale-105 active:scale-95 active:bg-[#7d0000]">
        VOLTAR
      </button>
    </a>
    <h1 class="text-xl font-bold text-center mb-6">{{ editando ? 'Editar Usuário' : 'Novo Usuário' }}</h1>
    <form (ngSubmit)="criarOuAtualizarUsuario()" #usuarioForm="ngForm" class="space-y-4">
      <div>
        <label for="nomeCompleto" class="block font-semibold mb-1">Nome Completo:</label>
        <input id="nomeCompleto" name="nomeCompleto" [(ngModel)]="usuario.nomeCompleto" required class="w-full border border-[#a00000] rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#a00000]" />
      </div>
      <div>
        <label for="matricula" class="block font-semibold mb-1">Matrícula:</label>
        <input id="matricula" name="matricula" [(ngModel)]="usuario.matricula" required class="w-full border border-[#a00000] rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#a00000]" />
      </div>
      <div>
        <label for="perfil" class="block font-semibold mb-1">Perfil:</label>
        <select id="perfil" name="perfil" [(ngModel)]="usuario.perfil" required class="w-full border border-[#a00000] rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#a00000]">
          <option value="Motorista">Motorista</option>
          <option value="Administrativo">Administrativo</option>
          <option value="Logística">Logística</option>
        </select>
      </div>
      <div class="flex items-center gap-2">
        <input id="trocarSenha" type="checkbox" name="trocarSenha" [(ngModel)]="usuario.trocarSenhaPrimeiroLogin"
          class="w-4 h-4 border border-[#a00000] rounded focus:ring-[#a00000]" />
        <label for="trocarSenha" class="font-semibold">Trocar senha no primeiro login</label>
      </div>
      <div>
        <label for="senha" class="block font-semibold mb-1">Senha:</label>
        <input id="senha" name="senha" type="password" [(ngModel)]="usuario.senha" required class="w-full border border-[#a00000] rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#a00000]" />
      </div>
      <div class="flex gap-2">
        <button type="submit" class="w-full bg-[#a00000] hover:bg-red-800 text-white font-semibold py-2 rounded flex items-center justify-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
          </svg>
          {{ editando ? 'Salvar' : 'Criar' }}
        </button>
        <button *ngIf="editando" type="button" (click)="cancelarEdicao()" class="w-full bg-gray-300 hover:bg-gray-400 text-[#a00000] font-semibold py-2 rounded">Cancelar</button>
      </div>
    </form>
    <div *ngIf="mensagem" class="text-green-600 text-center mt-4">{{ mensagem }}</div>
    <div *ngIf="erro" class="text-red-600 text-center mt-4">{{ erro }}</div>
  </div>

  <div class="w-full max-w-md bg-white rounded-xl shadow-lg p-6 text-[#a00000] mt-8">
    <h2 class="text-lg font-bold mb-4 text-center">Usuários Cadastrados</h2>
    <table class="w-full text-left">
      <thead>
        <tr>
          <th class="py-2">Nome</th>
          <th class="py-2">Matrícula</th>
          <th class="py-2">Perfil</th>
          <th class="py-2 text-center">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of usuarios">
          <td class="py-1">{{ u.nomeCompleto }}</td>
          <td class="py-1">{{ u.matricula }}</td>
          <td class="py-1">{{ u.perfil }}</td>
          <td class="py-1 flex gap-2 justify-center">
            <button (click)="editarUsuario(u)" class="bg-yellow-400 hover:bg-yellow-500 text-white rounded px-2 py-1 flex items-center" title="Editar">
              <i class="fas fa-edit"></i>
            </button>
            <button (click)="removerUsuario(u)" class="bg-red-600 hover:bg-red-700 text-white rounded px-2 py-1 flex items-center" title="Remover">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="usuarios.length === 0">
          <td colspan="4" class="text-center text-gray-500 py-4">Nenhum usuário cadastrado.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
